<app-os4ml-default-template data-testid="solutions-page">
  <h1 header id="dialog-title" class="headline-large primary-text">
    {{ 'pages.solutions_page.title' | translate }}
  </h1>
  <div nav class="actions">
    <app-databag-filter
      [databags]="(databags$ | async) ?? []"
      [defaultValue]="(databagId$ | async) ?? undefined"
      (databagChange)="onDatabagChanged($event)"></app-databag-filter>
    <div class="button-section">
      <app-databag-create-button [type]="'text'" (addDatabag)="addDatabag()">
      </app-databag-create-button>
      <app-solution-create-button
        [type]="'primary'"
        [disabled]="!(databags$ | async | hasElements)"
        (addSolution)="addSolution()">
      </app-solution-create-button>
    </div>
  </div>
  <ng-container main>
    <app-datatable-skeleton
      [displayedColumns]="[
        'solutionName',
        'databagName',
        'metrics',
        'creationTime',
        'creation',
        'status',
        'actions'
      ]"
      [headerNames]="[
        'organisms.solution_data_table.column_header.solution_name',
        'organisms.solution_data_table.column_header.databag_name',
        'organisms.solution_data_table.column_header.quality',
        'organisms.solution_data_table.column_header.runtime',
        'organisms.solution_data_table.column_header.creation',
        'organisms.solution_data_table.column_header.status',
        'organisms.solution_data_table.column_header.actions'
      ]"
      [isSolutionsTable]="true"
      *ngIf="(isLoading$ | async) === true"></app-datatable-skeleton>
    <app-solution-data-table
      *ngIf="(isLoading$ | async) === false"
      [solutions]="(solutions$ | async) ?? []"
      [databags]="(databags$ | async) ?? []"
      (createPredictionButton)="openCreatePredictionDialog($event)">
    </app-solution-data-table>
    <app-ml-entity-status-placeholder
      *ngIf="
        (isLoading$ | async) === false && !(solutions$ | async | hasElements)
      "
      [hasSolutions]="solutions$ | async | hasElements"
      [hasDatabags]="databags$ | async | hasElements"
      (addDatabag)="addDatabag()"
      (addSolution)="addSolution()">
    </app-ml-entity-status-placeholder>
  </ng-container>
</app-os4ml-default-template>
