<table mat-table [dataSource]="datasource" data-testid="datatable">
  <ng-container matColumnDef="{{ displayedColumns[0] }}">
    <th mat-header-cell *matHeaderCellDef class="surface primary-text">
      {{ headerNames[0] | translate }}
    </th>
    <td mat-cell *matCellDef="let element">
      {{ element.name }}
    </td>
  </ng-container>
  <ng-container matColumnDef="{{ displayedColumns[1] }}">
    <th mat-header-cell *matHeaderCellDef>
      {{ headerNames[1] | translate }}
    </th>
    <td mat-cell *matCellDef="let element">
      <div *ngIf="isDatabagTable">
        {{ element.numberColumns }}
      </div>
      <div *ngIf="isSolutionsTable">
        {{ (element.databagId | getDatabagById)?.name }}
      </div>
      <div *ngIf="isPredictionsTable">
        {{ (element.solutionId | getSolutionById)?.name }}
      </div>
    </td>
  </ng-container>
  <ng-container matColumnDef="{{ displayedColumns[2] }}">
    <th mat-header-cell *matHeaderCellDef>
      {{ headerNames[2] | translate }}
    </th>
    <td mat-cell *matCellDef="let element">
      <div *ngIf="isDatabagTable">
        {{ element.numberRows }}
      </div>
      <div *ngIf="isSolutionsTable">
        <app-star-rating
          [rating]="element.metrics?.combined || 0"
          [numberStars]="5">
        </app-star-rating>
      </div>
      <div *ngIf="isPredictionsTable">
        {{ (element.databagId | getDatabagById)?.name }}
      </div>
    </td>
  </ng-container>
  <ng-container matColumnDef="{{ displayedColumns[3] }}">
    <th mat-header-cell *matHeaderCellDef class="surface primary-text">
      {{ headerNames[3] | translate }}
    </th>
    <td mat-cell *matCellDef="let element">
      <span class="mat-body-2 on-surface-text">
        <app-runtime-indicator
          [creationTime]="element.creationTime"
          [completionTime]="element.completionTime">
        </app-runtime-indicator>
      </span>
    </td>
  </ng-container>
  <ng-container matColumnDef="{{ displayedColumns[4] }}">
    <th mat-header-cell *matHeaderCellDef>
      {{ headerNames[4] | translate }}
    </th>
    <td mat-cell *matCellDef="let element">
      {{ element.creationTime | localizedDate: 'dd.MM.yyyy' }}
    </td>
  </ng-container>
  <ng-container matColumnDef="{{ displayedColumns[5] }}">
    <th mat-header-cell *matHeaderCellDef class="surface primary-text">
      {{ headerNames[5] | translate }}
    </th>
    <td mat-cell *matCellDef="let element">
      <app-processing-status-indicator
        [shortStatus]="element.status | shortStatus">
      </app-processing-status-indicator>
    </td>
  </ng-container>
  <ng-container matColumnDef="{{ displayedColumns[6] }}">
    <th mat-header-cell *matHeaderCellDef>
      {{ headerNames[6] | translate }}
    </th>
    <td mat-cell *matCellDef="let element">
      <div *ngIf="isDatabagTable">
        <app-databag-context-menu
          [showDatabagDetailLink]="['/databags/detail', element?.id]"
          (createSolutionButton)="
            createSolutionButton.emit(element.id)
          "></app-databag-context-menu>
      </div>
      <div *ngIf="isSolutionsTable">
        <app-solution-context-menu
          [solutionElement]="element"
          (createPredictionButton)="createPredictionButton.emit(element.id)"
          [showPredictionLink]="['/predictions']"
          [showPredictionParams]="{
            selectedDatabag: element.databagId,
            selectedSolution: element.id
          }"
          [showSolutionDetailLink]="[
            '/solutions/detail',
            element?.id
          ]"></app-solution-context-menu>
      </div>
      <div *ngIf="isPredictionsTable">
        <app-prediction-context-menu
          [predictionElement]="element"
          (deletePredictionButton)="deletePredictionButton.emit(element.id)"
          (downloadPredictionButton)="
            downloadPredictionButton.emit(element.id)
          "></app-prediction-context-menu>
      </div>
    </td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr
    mat-row
    *matRowDef="let row; columns: displayedColumns"
    data-testid="datatable-item"></tr>
</table>
