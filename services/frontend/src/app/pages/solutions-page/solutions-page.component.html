<app-os4ml-default-template data-testid="solutions-page">
  <h1 header role="header" class="headline-1 primary-text">
    {{ 'pages.solutions_page.title' | translate }}
  </h1>
  <div nav role="actions" class="actions">
    <app-select
      [label]="
        'pages.solutions_page.actions.filter_by_databag.label' | translate
      "
      [options]="
        (databags$ | async) ?? []
          | toSelectOption : getDatabagId : getDatabagName
      "
      [defaultValue]="(databagId$ | async) ?? undefined"
      (selectionChange)="onDatabagChanged($event)">
    </app-select>
    <div class="button-section">
      <app-databag-create-button [type]="'text'" (addDatabag)="addDatabag()">
      </app-databag-create-button>
      <app-solution-create-button
        [type]="'primary'"
        [disabled]="!(databags$ | async | hasElements)"
        (addSolution)="addSolution()">
      </app-solution-create-button>
    </div>
  </div>
  <ng-container main>
    <app-solution-data-table
      [solutions]="
        solutions$ | async | filterSolutionsByDatabagId : (databagId$ | async)
      "
      [databags]="(databags$ | async) ?? []"
      (solutionSettingButton)="
        openSolutionSettingDialog($event)
      "></app-solution-data-table>
    <app-no-solutions-placeholder
      *ngIf="
        (databags$ | async | hasElements) && !(solutions$ | async | hasElements)
      "
      (addSolutionButton)="addSolution()">
    </app-no-solutions-placeholder>
    <app-no-databags-placeholder
      *ngIf="!(databags$ | async | hasElements)"
      (addDatabagButton)="addDatabag()">
    </app-no-databags-placeholder>
  </ng-container>
</app-os4ml-default-template>
