e2e:
  image: cypress/browsers:node12.14.1-chrome85-ff81
  tags:
    - aime
  stage: e2e
  needs:
    - reset
  script:
    - cd services/frontend && npm ci && npx cypress run
  artifacts:
    when: always
    paths:
      - services/frontend/cypress/videos/**/*.mp4
      - services/frontend/cypress/screenshots/**/*.png
    expire_in: 1 day
  resource_group: testing
  rules:
    - if: $CI_COMMIT_BRANCH == "main"
    - if: $CI_COMMIT_BRANCH == "develop"
    - if: $CI_COMMIT_TAG
